#include<iostream>
#include<string>
#include<list>
#include<map>
#include<Windows.h>
#include<fstream>
const std::string base_name = "base.txt";


void print_base(const std::map<std::string, std::list<std::string>>& base);
void save_base(const std::map<std::string, std::list<std::string>>& base);

void compare(std::string name, const std::map<std::string, std::list<std::string>>& base)
{
	for (std::map<std::string, std::list<std::string>>::const_iterator it = base.begin(); it != base.end(); it++)
	{
		if (name.compare(it->first)==0){
			std::cout << it->first << ": \t";
			for (std::list<std::string>::const_iterator l_it = it->second.begin(); l_it != it->second.end(); l_it++)
			{
				std::cout << *l_it << " , ";
			}
			std::cout << "\b \b";
			std::cout << "\b \b;\n";
		}
	}
}
void main()
{
	setlocale(LC_ALL, "Russian");
	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);

	HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);
	COORD buffer = { 120, 50 };
	SetConsoleDisplayMode(hConsole, CONSOLE_FULLSCREEN_MODE, &buffer);

	std::map<std::string, std::list<std::string>> base =
	{
	std::pair<std::string, std::list<std::string>>("m123ru777", { "Travel on red", "Over speed" }),
	std::pair<std::string, std::list<std::string>>("m446rd011", { "Drunk driving", "Bad words" }),
	std::pair<std::string, std::list<std::string>>("q199rs124", { "Fight with police officers" }),
	};

	print_base(base);
	save_base(base);
	std::cout << "Search by number : \n";
	std::string str = "m123ru777";
	compare(str, base);
}


void print_base(const std::map<std::string, std::list<std::string>>& base)
{
	for (std::map<std::string, std::list<std::string>>::const_iterator it = base.begin(); it != base.end(); it++)
	{
		std::cout << it->first << ": \t";
		for (std::list<std::string>::const_iterator l_it = it->second.begin(); l_it != it->second.end(); l_it++)
		{
			std::cout << *l_it << " , ";
		}
		std::cout << "\b \b";
		std::cout << "\b \b;\n";
	}
}
void save_base(const std::map<std::string, std::list<std::string>>& base)
{
	std::ofstream fout(base_name);
	for (std::map<std::string, std::list<std::string>>::const_iterator it = base.begin(); it != base.end(); it++)
	{
		fout << it->first << ": \t";
		for (std::list<std::string>::const_iterator l_it = it->second.begin(); l_it != it->second.end(); l_it++)
		{
			fout << *l_it << " , ";
			if (l_it != --(it->second.end())) fout << " , ";
		}
		fout << "\b \b";
		fout << ";\n";
	}

}